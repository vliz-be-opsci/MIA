{"version":3,"file":"ActorContextPreprocessSourceToDestination.js","sourceRoot":"","sources":["ActorContextPreprocessSourceToDestination.ts"],"names":[],"mappings":";;;AACA,6EAA0E;AAC1E,+DAA8E;AAI9E;;GAEG;AACH,MAAa,yCAA0C,SAAQ,+CAAsB;IACnF,YAAmB,IAAiC;QAClD,KAAK,CAAC,IAAI,CAAC,CAAC;IACd,CAAC;IAEM,KAAK,CAAC,IAAI,CAAC,OAAgB;QAChC,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,KAAK,CAAC,GAAG,CAAC,MAAe;QAC9B,IAAI,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,+BAAa,CAAC,wBAAwB,CAAC;YAC5D,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,oCAAkB,CAAC,WAAW,CAAC,EAAE,CAAC;YACtD,MAAM,OAAO,GAA8B,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,+BAAa,CAAC,wBAAwB,CAAE,CAAC;YACvG,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBACzB,OAAO,EAAE,OAAO,EAAE,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,oCAAkB,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YACrF,CAAC;QACH,CAAC;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;CACF;AAnBD,8FAmBC","sourcesContent":["import type { IActorContextPreprocessOutput, IActorContextPreprocessArgs } from '@comunica/bus-context-preprocess';\nimport { ActorContextPreprocess } from '@comunica/bus-context-preprocess';\nimport { KeysInitQuery, KeysRdfUpdateQuads } from '@comunica/context-entries';\nimport type { IActorTest, IAction } from '@comunica/core';\nimport type { QuerySourceUnidentified } from '@comunica/types';\n\n/**\n * A comunica Source To Destination Context Preprocess Actor.\n */\nexport class ActorContextPreprocessSourceToDestination extends ActorContextPreprocess {\n  public constructor(args: IActorContextPreprocessArgs) {\n    super(args);\n  }\n\n  public async test(_action: IAction): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IAction): Promise<IActorContextPreprocessOutput> {\n    if (action.context.get(KeysInitQuery.querySourcesUnidentified) &&\n      !action.context.get(KeysRdfUpdateQuads.destination)) {\n      const sources: QuerySourceUnidentified[] = action.context.get(KeysInitQuery.querySourcesUnidentified)!;\n      if (sources.length === 1) {\n        return { context: action.context.set(KeysRdfUpdateQuads.destination, sources[0]) };\n      }\n    }\n    return action;\n  }\n}\n"]}