{"version":3,"file":"ActorContextPreprocessConvertShortcuts.js","sourceRoot":"","sources":["ActorContextPreprocessConvertShortcuts.ts"],"names":[],"mappings":";;;AACA,6EAA0E;AAE1E,yCAAkD;AAGlD;;GAEG;AACH,MAAa,sCAAuC,SAAQ,+CAAsB;IAGhF,YAAmB,IAAiD;QAClE,KAAK,CAAC,IAAI,CAAC,CAAC;IACd,CAAC;IAEM,KAAK,CAAC,IAAI,CAAC,OAAgB;QAChC,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,KAAK,CAAC,GAAG,CAAC,MAAe;QAC9B,OAAO;YACL,OAAO,EAAE,sCAAsC,CAAC,eAAe,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,mBAAmB,CAAC;SAC1G,CAAC;IACJ,CAAC;IAEM,MAAM,CAAC,eAAe,CAAC,OAAuB,EAAE,mBAA2C;QAChG,KAAK,MAAM,GAAG,IAAI,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC;YACjC,IAAI,mBAAmB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC;gBAClC,OAAO,GAAG,OAAO;qBACd,GAAG,CAAC,IAAI,uBAAgB,CAAC,mBAAmB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;qBAC1E,MAAM,CAAC,GAAG,CAAC,CAAC;YACjB,CAAC;QACH,CAAC;QACD,OAAO,OAAO,CAAC;IACjB,CAAC;CACF;AA3BD,wFA2BC","sourcesContent":["import type { IActorContextPreprocessOutput, IActorContextPreprocessArgs } from '@comunica/bus-context-preprocess';\nimport { ActorContextPreprocess } from '@comunica/bus-context-preprocess';\nimport type { IAction, IActorTest } from '@comunica/core';\nimport { ActionContextKey } from '@comunica/core';\nimport type { IActionContext } from '@comunica/types';\n\n/**\n * A comunica Convert Shortcuts Context Preprocess Actor.\n */\nexport class ActorContextPreprocessConvertShortcuts extends ActorContextPreprocess {\n  public readonly contextKeyShortcuts: Record<string, string>;\n\n  public constructor(args: IActorContextPreprocessConvertShortcutsArgs) {\n    super(args);\n  }\n\n  public async test(_action: IAction): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IAction): Promise<IActorContextPreprocessOutput> {\n    return {\n      context: ActorContextPreprocessConvertShortcuts.expandShortcuts(action.context, this.contextKeyShortcuts),\n    };\n  }\n\n  public static expandShortcuts(context: IActionContext, contextKeyShortcuts: Record<string, string>): IActionContext {\n    for (const key of context.keys()) {\n      if (contextKeyShortcuts[key.name]) {\n        context = context\n          .set(new ActionContextKey(contextKeyShortcuts[key.name]), context.get(key))\n          .delete(key);\n      }\n    }\n    return context;\n  }\n}\n\nexport interface IActorContextPreprocessConvertShortcutsArgs extends IActorContextPreprocessArgs {\n  /**\n   * A record of context shortcuts to full context keys (as defined in @comunica/context-entries).\n   * @range {json}\n   * @default {{\n   *   \"sources\": \"@comunica/actor-init-query:querySourcesUnidentified\",\n   *   \"destination\": \"@comunica/bus-rdf-update-quads:destination\",\n   *   \"initialBindings\": \"@comunica/actor-init-query:initialBindings\",\n   *   \"queryFormat\": \"@comunica/actor-init-query:queryFormat\",\n   *   \"baseIRI\": \"@comunica/actor-init-query:baseIRI\",\n   *   \"log\": \"@comunica/core:log\",\n   *   \"datetime\": \"@comunica/actor-http-memento:datetime\",\n   *   \"queryTimestamp\": \"@comunica/actor-init-query:queryTimestamp\",\n   *   \"httpProxyHandler\": \"@comunica/actor-http-proxy:httpProxyHandler\",\n   *   \"lenient\": \"@comunica/actor-init-query:lenient\",\n   *   \"httpIncludeCredentials\": \"@comunica/bus-http:include-credentials\",\n   *   \"httpAuth\": \"@comunica/bus-http:auth\",\n   *   \"httpTimeout\": \"@comunica/bus-http:http-timeout\",\n   *   \"httpBodyTimeout\": \"@comunica/bus-http:http-body-timeout\",\n   *   \"httpRetryCount\": \"@comunica/bus-http:http-retry-count\",\n   *   \"httpRetryDelay\": \"@comunica/bus-http:http-retry-delay\",\n   *   \"httpRetryOnServerError\": \"@comunica/bus-http:http-retry-on-server-error\",\n   *   \"fetch\": \"@comunica/bus-http:fetch\",\n   *   \"recoverBrokenLinks\": \"@comunica/bus-http-wayback:recover-broken-links\",\n   *   \"readOnly\": \"@comunica/bus-query-operation:readOnly\",\n   *   \"extensionFunctions\": \"@comunica/actor-init-query:extensionFunctions\",\n   *   \"extensionFunctionCreator\": \"@comunica/actor-init-query:extensionFunctionCreator\",\n   *   \"functionArgumentsCache\": \"@comunica/actor-init-query:functionArgumentsCache\",\n   *   \"explain\": \"@comunica/actor-init-query:explain\",\n   *   \"unionDefaultGraph\": \"@comunica/bus-query-operation:unionDefaultGraph\",\n   *   \"traverse\": \"@comunica/bus-query-source-identify:traverse\",\n   *   \"noCache\": \"@comunica/actor-init-query:noCache\"\n   * }}\n   */\n  contextKeyShortcuts: Record<string, string>;\n}\n"]}