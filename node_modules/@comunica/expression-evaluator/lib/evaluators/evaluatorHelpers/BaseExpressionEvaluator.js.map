{"version":3,"file":"BaseExpressionEvaluator.js","sourceRoot":"","sources":["BaseExpressionEvaluator.ts"],"names":[],"mappings":";;;AAEA,qDAA0D;AAI1D,yCAAyC;AAoBzC,MAAa,uBAAuB;IAClC,YAAsC,eAAiC;QAAjC,oBAAe,GAAf,eAAe,CAAkB;IAAG,CAAC;IAEjE,IAAI,CAAC,IAAY;QACzB,OAAO,IAAI,CAAC;IACd,CAAC;IAES,QAAQ,CAAC,IAAgB,EAAE,OAAqB;QACxD,MAAM,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,IAAA,yBAAe,EAAC,IAAI,CAAC,CAAC,CAAC;QAChD,IAAI,CAAC,IAAI,EAAE,CAAC;YACV,MAAM,IAAI,GAAG,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;QACzD,CAAC;QACD,OAAO,IAAI,CAAC,eAAe,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;IAC3D,CAAC;CACF;AAdD,0DAcC","sourcesContent":["import type * as RDF from '@rdfjs/types';\nimport type * as E from '../../expressions';\nimport { expressionToVar } from '../../functions/Helpers';\nimport type { FunctionArgumentsCache } from '../../functions/OverloadTree';\nimport type { ITermTransformer } from '../../transformers/TermTransformer';\nimport type { ITimeZoneRepresentation } from '../../util/DateTimeHelpers';\nimport * as Err from '../../util/Errors';\nimport type { ISuperTypeProvider, SuperTypeCallback, TypeCache } from '../../util/TypeHandling';\n\nexport interface ISharedContext {\n  now?: Date;\n  baseIRI?: string;\n  typeCache?: TypeCache;\n  getSuperType?: SuperTypeCallback;\n  functionArgumentsCache?: FunctionArgumentsCache;\n  defaultTimeZone?: ITimeZoneRepresentation;\n}\n\nexport interface ICompleteSharedContext {\n  now: Date;\n  baseIRI?: string;\n  functionArgumentsCache: FunctionArgumentsCache;\n  superTypeProvider: ISuperTypeProvider;\n  defaultTimeZone: ITimeZoneRepresentation;\n}\n\nexport class BaseExpressionEvaluator {\n  public constructor(protected readonly termTransformer: ITermTransformer) {}\n\n  protected term(expr: E.Term): E.Term {\n    return expr;\n  }\n\n  protected variable(expr: E.Variable, mapping: RDF.Bindings): E.Term {\n    const term = mapping.get(expressionToVar(expr));\n    if (!term) {\n      throw new Err.UnboundVariableError(expr.name, mapping);\n    }\n    return this.termTransformer.transformRDFTermUnsafe(term);\n  }\n}\n"]}