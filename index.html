<!DOCTYPE html>
<html lang="en">

<head>
        <title>Web Widget</title>
        <script src="./dist/mia.bundle.js" id="mia_script" deref-config="./test/deref_config.json" self-reference
                defer></script>
        <meta name="viewport">
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <meta property="og:url" content="https://marineinfo.org/id/person/38476">
        <script type="module" src="https://vocab.vliz.be/webcomponent/main.js"></script>
        <script>

                window.onload = function () {
                        const container = document.querySelector("#container");
                        const termtable = document.querySelector("#selected_term_table");

                        container.addEventListener("search-results-changed", (event) => {
                                console.debug(JSON.stringify(event.detail))
                                console.debug(`The search results have changed`);
                        });

                        container.addEventListener("selection-changed", (event) => {

                                //check the event.details if the array is bigger then 0
                                // if yes then make a table with the selected terms
                                // if no then remove the table
                                if (event.detail.length > 0) {
                                        termtable.innerHTML = "";
                                        const table = document.createElement("table");
                                        table.classList.add("table");
                                        table.classList.add("table-striped");
                                        table.classList.add("table-bordered");
                                        table.classList.add("table-hover");
                                        table.classList.add("table-sm");
                                        table.classList.add("table-responsive");
                                        table.classList.add("table-responsive-sm");
                                        table.classList.add("table-responsive-md");
                                        table.classList.add("table-responsive-lg");
                                        table.classList.add("table-responsive-xl");
                                        table.classList.add("table-responsive-xxl");
                                        table.classList.add("table-dark");

                                        // Create the header
                                        // col names are name, uri, vocabulary
                                        const thead = document.createElement("thead");
                                        const tr = document.createElement("tr");
                                        const th2 = document.createElement("th");
                                        th2.scope = "col";
                                        th2.innerText = "URI";
                                        const th3 = document.createElement("th");
                                        th3.scope = "col";
                                        th3.innerText = "Vocabulary";
                                        tr.appendChild(th2);
                                        tr.appendChild(th3);
                                        thead.appendChild(tr);
                                        table.appendChild(thead);

                                        //body of the table is made by looping over the event.detail
                                        // event detail looks like :
                                        /*
                                        [{"prefLabel":{"nl":["Schelde"]},"sourceDataset":"https://my-application.com/dataset/6686AE6164C5DC84AC7D0258","datasetEntityUri":"http://marineregions.org/mrgid/2542","vocabulary":"https://my-application.com/vocabularies/6686AE6064C5DC84AC7D0257","tagLabels":null,"uuid":"f3c2ee70-6f75-11ef-b508-d5369d5fea7c","uri":"http://marineregions.org/mrgid/2542","id":"f3c2ee70-6f75-11ef-b508-d5369d5fea7c","highlight":{"prefLabel.nl":["<em>Schelde</em>"]},"trimmedPrefLabel":"Schelde"},{"prefLabel":{"nl":["Schelle"]},"sourceDataset":"https://my-application.com/dataset/6686AE6164C5DC84AC7D0258","datasetEntityUri":"http://marineregions.org/mrgid/2604","vocabulary":"https://my-application.com/vocabularies/6686AE6064C5DC84AC7D0257","tagLabels":null,"uuid":"09104520-6f76-11ef-b508-d5369d5fea7c","uri":"http://marineregions.org/mrgid/2604","id":"09104520-6f76-11ef-b508-d5369d5fea7c","highlight":{"prefLabel.nl":["<em>Schelle</em>"]},"trimmedPrefLabel":"Schelle"},{"prefLabel":{"en":["Rhine-Meuse-Scheldt Delta"]},"sourceDataset":"https://my-application.com/dataset/6686AE6164C5DC84AC7D0258","datasetEntityUri":"http://marineregions.org/mrgid/19668","vocabulary":"https://my-application.com/vocabularies/6686AE6064C5DC84AC7D0257","tagLabels":null,"uuid":"f3f9b5e0-6f75-11ef-b508-d5369d5fea7c","uri":"http://marineregions.org/mrgid/19668","id":"f3f9b5e0-6f75-11ef-b508-d5369d5fea7c","highlight":{"prefLabel.en":["Rhine-Meuse-<em>Scheldt</em> Delta"]},"trimmedPrefLabel":"Rhine-Meuse-Sch..."}]
                                        */

                                        const tbody = document.createElement("tbody");
                                        event.detail.forEach((element) => {
                                                const tr = document.createElement("tr");
                                                const td2 = document.createElement("td");
                                                //should ba a <a> tag
                                                const a = document.createElement("a");
                                                a.href = element.uri;
                                                a.innerText = element.uri;
                                                td2.appendChild(a);
                                                const td3 = document.createElement("td");
                                                td3.innerText = element.vocabulary;
                                                tr.appendChild(td2);
                                                tr.appendChild(td3);
                                                tbody.appendChild(tr);
                                        });

                                        table.appendChild(tbody);
                                        termtable.appendChild(table);
                                } else {
                                        termtable.innerHTML = "";
                                }
                                console.debug(JSON.stringify(event.detail));
                        });
                };
        </script>
</head>

<body>
        <!-- The widget will be inserted here -->

        <h1>Search</h1>
        <div id="container">
                <vocab-search-bar id="search" search-endpoint="https://vocab.vliz.be/" nochange>
                </vocab-search-bar>
        </div>
        <div id="selected_term_table">
        </div>
        <p><a href="https://marineregions.org/mrgid/61473">No loading geom point</a></p>
        <p><a href="https://marineregions.org/mrgid/4868">Also grey</a></p>
        <p><a href="https://marineregions.org/mrgid/7632">Also grey</a></p>
        <p><a href="https://marineinfo.org/id/publication/355430">publication with authors</a></p>
        <p><a href="https://marineinfo.org/id/dataset/8135">dataset with urls</a></p>
        <p><a href="https://marineinfo.org/id/event/3255">event</a></p>
        <p><a href="https://marineinfo.org/id/event/3252">event</a></p>
        <!-- 
        <div nochange>
                <p>This is a test page to see if stuff works as it should work</p>
                <p><a href="https://marineinfo.org/id/person/38476">Linked data man</a></p>
                <p><a href="https://marineinfo.org/id/person/37869">Very handsome person is behind this curtain</a></p>
                <p><a href="https://marineinfo.org/id/person/41904">bonanza</a></p>
                <p>I've been here => <a href="https://marineregions.org/mrgid/8361">Canari islands</a></p>
                <p> much text to see whether or not the popup will be on the bottom or top left<a
                                href="https://marineregions.org/mrgid/3293">Belgian EEZ</a></p>
                <p><a href="https://marineinfo.org/id/institute/12919">institute</a></p>
                <p><a href="https://marineinfo.org/id/project/5240">project</a></p>
                <p><a href="https://marineinfo.org/id/dataset/8135">dataset with urls</a></p>
                <p>Lorem ipsum doletat text <a href="https://marineinfo.org/id/publication/300143">publication</a></p>
                
                <p><a href="https://marineinfo.org/id/publication/225534">some multimedia shit</a></p>
                <p><a href="https://marineinfo.org/id/event/3255">event</a></p>
                <p><a href="https://google.com">not a MIA here</a></p>
                <p> much text to see whether or not the popup will be on left or the right side of the affordance<a
                                href="https://marineregions.org/mrgid/3293">Belgian EEZ</a></p>
                <p><a href="https://marineregions.org/mrgid/3293">Belgian EEZ bL</a></p>
                <p><a href="https://orcid.org/0000-0002-9648-6484">Felicity Jones fan</a></p>
                <p>This is a test page to see if stuff works as it should work</p>
                <p><a href="https://marineinfo.org/id/person/38476">Linked data man</a></p>
                <p><a href="https://marineinfo.org/id/person/37869">Very handsome person is behind this curtain</a></p>
                <p><a href="https://marineinfo.org/id/person/41904">bonanza</a></p>
                <p>I've been here => <a href="https://marineregions.org/mrgid/8361">Canari islands</a></p>
                <p> much text to see whether or not the popup will be on the bottom or top left<a
                                href="https://marineregions.org/mrgid/3293">Belgian EEZ</a></p>
                <p><a href="https://marineinfo.org/id/institute/12919">institute</a></p>
        </div>
        <p><a href="https://marineinfo.org/id/project/5240">project</a></p>
        <p><a href="https://marineinfo.org/id/dataset/6430">dataset</a></p>
        <p><a href="https://aphia.org/id/taxname/127160">tasty fish</a></p>
        <p><a href="https://aphia.org/id/taxname/110704">other organism</a></p>
        <p><a href="https://marineinfo.org/id/publication/300143">publication</a></p>
        <p><a href="https://marineinfo.org/id/publication/355430">publication with authors</a></p>
        <p><a href="https://marineinfo.org/id/publication/225534">some multimedia shit</a></p>
        <p><a href="https://marineinfo.org/id/event/3255">event</a></p>
        <p><a href="https://google.com">not a MIA here</a></p>
        
        <p> much text to see whether or not the popup will be on the bottom or top left<a
                        href="https://marineregions.org/mrgid/3293">Belgian EEZ</a></p>
        <p><a href="https://marineregions.org/mrgid/3293">Belgian EEZ bL</a></p>
        <p><a href="https://orcid.org/0000-0002-9648-6484">Felicity Jones fan</a></p>
        <p>This is a test page to see if stuff works as it should work</p>
        <p><a href="https://marineinfo.org/id/person/41728">Rando</a></p>
        <p><a href="https://marineinfo.org/id/person/23412">other rando</a></p>
        <p><a href="https://marineinfo.org/id/person/41904">bonanza</a></p>
        <p>I've been here => <a href="https://marineregions.org/mrgid/8361">Canari islands</a></p>
        <p> much text to see whether or not the popup will be on the bottom or top left<a
                        href="https://marineregions.org/mrgid/3293">Belgian EEZ</a></p>
        <p><a href="https://marineinfo.org/id/institute/12919">institute</a></p>
        <p><a href="https://marineinfo.org/id/project/5240">project</a></p>
        <p><a href="https://marineinfo.org/id/dataset/6430">dataset</a></p>
        <p><a href="https://marineinfo.org/id/publication/300143">publication</a></p>
        <p><a href="https://marineinfo.org/id/publication/355430">publication with authors</a></p>
        <p><a href="https://marineinfo.org/id/publication/225534">some multimedia shit</a></p>
        <p><a href="https://marineinfo.org/id/event/3255">event</a></p>
        <p><a href="https://google.com">not a MIA here</a></p>
        <p> much text to see whether or not the popup will be on the bottom or top left<a
                        href="https://marineregions.org/mrgid/3293">Belgian EEZ</a></p>
        <p><a href="https://marineregions.org/mrgid/3293">Belgian EEZ bL</a></p>
        <p><a href="https://orcid.org/0000-0002-9648-6484">Felicity Jones fan</a></p>
        <p>This is a test page to see if stuff works as it should work</p>
        <p><a href="https://marineinfo.org/id/person/38476">Linked data man</a></p>
        <p><a href="https://marineinfo.org/id/person/37869">Very handsome person is behind this curtain</a></p>
        <p><a href="https://marineinfo.org/id/person/41904">bonanza</a></p>
        <p>I've been here => <a href="https://marineregions.org/mrgid/8361">Canari islands</a></p>
        <p> much text to see whether or not the popup will be on the bottom or top left<a
                        href="https://marineregions.org/mrgid/3293">Belgian EEZ</a></p>
        <p><a href="https://marineinfo.org/id/institute/12919">institute</a></p>
        <p><a href="https://marineinfo.org/id/project/5240">project</a></p>
        <p><a href="https://marineinfo.org/id/dataset/6430">dataset</a></p>
        <p><a href="https://marineinfo.org/id/publication/300143">publication</a></p>
        <p><a href="https://marineinfo.org/id/publication/355430">publication with authors</a></p>
        <p><a href="https://marineinfo.org/id/publication/225534">some multimedia shit</a></p>
        <p><a href="https://marineinfo.org/id/event/3255">event</a></p>
        <p><a href="https://google.com">not a MIA here</a></p>
        <p> much text to see whether or not the popup will be on the bottom or top left<a
                        href="https://marineregions.org/mrgid/3293">Belgian EEZ</a></p>
        <p><a href="https://marineregions.org/mrgid/3293">Belgian EEZ bL</a></p>
        <p><a href="https://orcid.org/0000-0002-9648-6484">Felicity Jones fan</a></p>
        <p>This is a test page to see if stuff works as it should work</p>
        <p><a href="https://marineinfo.org/id/person/38476">Linked data man</a></p>
        <p><a href="https://marineinfo.org/id/person/37869">Very handsome person is behind this curtain</a></p>
        <p><a href="https://marineinfo.org/id/person/41904">bonanza</a></p>
        <p>I've been here => <a href="https://marineregions.org/mrgid/8361">Canari islands</a></p>
        <p> much text to see whether or not the popup will be on the bottom or top left<a
                        href="https://marineregions.org/mrgid/3293">Belgian EEZ</a></p>
        <p><a href="https://marineinfo.org/id/institute/12919">institute</a></p>
        <p><a href="https://marineinfo.org/id/project/5240">project</a></p>
        <p><a href="https://marineinfo.org/id/dataset/6430">dataset</a></p>
        <p><a href="https://marineinfo.org/id/publication/300143">publication</a></p>
        <p><a href="https://marineinfo.org/id/publication/355430">publication with authors</a></p>
        <p><a href="https://marineinfo.org/id/publication/225534">some multimedia shit</a></p>
        <p><a href="https://marineinfo.org/id/event/3255">event</a></p>
        <p><a href="https://google.com">not a MIA here</a></p>
        <p> much text to see whether or not the popup will be on the bottom or top left<a
                        href="https://marineregions.org/mrgid/3293">Belgian EEZ</a></p>
        <p><a href="https://marineregions.org/mrgid/3293">Belgian EEZ bL</a></p>
        <p><a href="https://orcid.org/0000-0002-9648-6484">Felicity Jones fan</a></p>
        -->
</body>

</html>